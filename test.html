<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<!-- Include Three.js library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<!-- Include GLSL noise library -->
<!-- <script src="https://unpkg.com/glsl-noise@0.0.2/index.js"></script> -->

<!-- Define your HTML canvas element -->
<canvas id="canvas"></canvas>

<!-- Vertex Shader -->
<script type="x-shader/x-vertex" id="vertexShader">
    varying vec2 vUv;
    varying vec3 vPosition;
    void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
</script>

<!-- Fragment Shader -->
<script type="x-shader/x-fragment" id="fragmentShader">
    // Create a uniform for the gradient texture.
    uniform sampler2D tDiffuse;
    uniform float time;
    uniform int numLayers;
    varying vec2 vUv;

    void main() {
        vec3 finalColor = vec3(0.0);
        float layerOffset = 1.0 / float(numLayers);
  
        for (int i = 0; i < numLayers; i++) {
          float hue = fract(time + float(i) * 0.1);
          vec2 uv = vUv;
          uv.x += float(i) * layerOffset;
  
          vec4 textureColor = texture2D(tDiffuse, uv);
          vec3 color = textureColor.rgb;
  
          // Apply a slight hue shift
          color = mix(color, color + vec3(hue, 0.0, hue), 0.5);
  
          finalColor += color;
        }
  
        gl_FragColor = vec4(finalColor / float(numLayers), 1.0);
      }

</script>


<script>
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('canvas') });
    renderer.setSize(window.innerWidth, window.innerHeight);
    
    // Load your two textures
    const texture1 = new THREE.TextureLoader().load('./src/assets/Background.jpg');
    const texture2 = new THREE.TextureLoader().load('./src/assets/textIntro.png');
    
    // Define a plane geometry
    const geometry = new THREE.PlaneGeometry(10, 5);
    
    // Create a shader material
    const shaderMaterial = new THREE.ShaderMaterial({
        uniforms: {
            texture1: { type: 't', value: texture1 },
            tDiffuse: { type: 't', value: texture2 },
            time: { type: 'f', value: 0.0 },
            numLayers: { value: 5 },
            resolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }
        },
        vertexShader: document.getElementById('vertexShader').textContent,
        fragmentShader: document.getElementById('fragmentShader').textContent,
    });
    
    // Create a mesh with the shader material
    const plane = new THREE.Mesh(geometry, shaderMaterial);
    scene.add(plane);
    
    // Set the camera position
    camera.position.z = 5;
    
    // Add the shader effect to the render loop
    const animate = () => {
        requestAnimationFrame(animate);
        
        // Update the time uniform for the shader
        shaderMaterial.uniforms.time.value += 0.0001;
    
        renderer.render(scene, camera);
    };
    
    animate();
</script>

</body>
</html>